<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>RAFT | Brute Force Loader</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-slate-200 p-10">

    <div class="max-w-2xl mx-auto bg-slate-800 p-6 rounded-2xl border border-slate-700">
        <h1 class="text-2xl font-bold mb-6 italic text-blue-400 underline">Diagnostic de Chargement v0.1.1</h1>
        <div id="logs" class="font-mono text-sm space-y-2"></div>
    </div>

    <script>
        const logs = document.getElementById('logs');
        function addLog(msg, color = "text-slate-300") {
            logs.innerHTML += `<div class="${color}">> ${msg}</div>`;
        }

        // --- TEST 1 : Tentative de chargement via Script Classique (Window Global) ---
        function testGlobalLoad() {
            addLog("Tentative 1 : Chargement via &lt;script&gt; classique...", "text-yellow-400");
            const script = document.createElement('script');
            script.src = "https://cdn.jsdelivr.net/npm/@tryboy869/frontendraft@0.1.1/dist/index.js";
            
            script.onload = () => {
                addLog("Script charg√©. V√©rification de window.FrontendRAFT...", "text-blue-400");
                if (window.FrontendRAFT) {
                    addLog("‚úÖ TROUV√â ! La classe est disponible globalement sur 'window.FrontendRAFT'", "text-green-400");
                    initRaft(window.FrontendRAFT);
                } else {
                    addLog("‚ùå √âCHEC : Rien trouv√© dans 'window'.", "text-red-400");
                    testESM(); // Si Global √©choue, on tente ESM
                }
            };
            script.onerror = () => addLog("‚ùå Erreur r√©seau lors du chargement du script.", "text-red-400");
            document.head.appendChild(script);
        }

        // --- TEST 2 : Tentative via Import ESM ---
        async function testESM() {
            addLog("Tentative 2 : Chargement via import() dynamique...", "text-yellow-400");
            try {
                const mod = await import("https://cdn.jsdelivr.net/npm/@tryboy869/frontendraft@0.1.1/dist/index.js");
                addLog("Module charg√©. Analyse...", "text-blue-400");
                const cls = mod.FrontendRAFT || mod.default;
                if (cls) {
                    addLog("‚úÖ TROUV√â ! Format ESM d√©tect√©.", "text-green-400");
                    initRaft(cls);
                }
            } catch (e) {
                addLog("‚ùå √âCHEC ESM : " + e.message, "text-red-400");
                addLog("‚ö†Ô∏è ANALYSE : Ton package v0.1.1 n'est ni Global ni ESM. Il est peut-√™tre en format CommonJS (Node.js uniquement).", "text-orange-500 font-bold");
            }
        }

        async function initRaft(Cls) {
            try {
                const raft = new Cls({ name: "Debug" });
                await raft.init();
                addLog("üéâ INSTANCE INITIALIS√âE AVEC SUCC√àS !", "text-emerald-400 font-bold");
            } catch(e) {
                addLog("üî• Erreur lors du .init() : " + e.message, "text-red-500");
            }
        }

        testGlobalLoad();
    </script>
</body>
</html>